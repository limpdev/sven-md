This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: **/*.svelte, **/*.css, **/*.js
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
src/
  components/
    FilesTab.svelte
    MarkdownRenderer.svelte
    OutlineTab.svelte
    Sidebar.svelte
  App.svelte
  fontawe.css # not included below because it's huge
  main.js
  style.css
rollup.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="src/components/OutlineTab.svelte">
<script>
  export let documentOutline = [];
  
  function scrollToHeading(id) {
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth', block: 'start' });
      // Add a temporary highlight effect
      element.classList.add('highlight-heading');
      setTimeout(() => {
        element.classList.remove('highlight-heading');
      }, 2000);
    }
  }
  
  function getIndentClass(level) {
    return `level-${Math.min(level, 6)}`;
  }
</script>

<div class="outline-tab">
  {#if documentOutline.length === 0}
    <div class="empty-state">
      <i class="fas fa-file-alt"></i>
      <p>No headings found in this document</p>
    </div>
  {:else}
    <ul class="outline-list">
      {#each documentOutline as item}
        <li class="outline-item {getIndentClass(item.level)}">
          <button 
            class="outline-link"
            on:click={() => scrollToHeading(item.id)}
            title={item.text}
          >
            <span class="heading-marker">
              {#if item.level === 1}
                <i class="fas fa-heading"></i>
              {:else if item.level === 2}
                <i class="fas fa-minus"></i>
              {:else}
                <i class="fas fa-circle" style="font-size: 6px;"></i>
              {/if}
            </span>
            <span class="heading-text">{item.text}</span>
          </button>
        </li>
      {/each}
    </ul>
  {/if}
</div>

<style>
  ::webkit-scrollbar {
    display: none;
  }
  
  .outline-tab {
    padding: 16px;
  }
  
  .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #999;
  }
  
  .empty-state i {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.5;
  }
  
  .empty-state p {
    margin: 0;
    font-size: 14px;
  }
  
  .outline-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .outline-item {
    margin: 0;
  }
  
  .outline-link {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 8px 12px;
    width: 100%;
    background: transparent;
    border: none;
    text-align: left;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s ease;
    color: #a0a0a0;
    font-size: 14px;
    line-height: 1.5;
  }
  
  .outline-link:hover {
    background: #f5f5f505;
    color: #0066cc;
  }
  
  .heading-marker {
    flex-shrink: 0;
    width: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #0066cc;
    opacity: 0.7;
  }
  
  .heading-text {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  /* Indentation levels */
  .level-1 {
    padding-left: 0;
  }
  
  .level-2 {
    padding-left: 12px;
  }
  
  .level-3 {
    padding-left: 24px;
  }
  
  .level-4 {
    padding-left: 36px;
  }
  
  .level-5 {
    padding-left: 48px;
  }
  
  .level-6 {
    padding-left: 60px;
  }
  
  /* Global style for heading highlight effect */
  :global(.highlight-heading) {
    animation: highlightPulse 2s ease;
  }
  
  @keyframes highlightPulse {
    0%, 100% {
      background-color: transparent;
    }
    50% {
      background-color: rgba(0, 102, 204, 0.1);
    }
  }
</style>
</file>

<file path="rollup.config.js">
import svelte from "rollup-plugin-svelte";
import resolve from "@rollup/plugin-node-resolve";
import commonjs from "@rollup/plugin-commonjs";
import { terser } from "rollup-plugin-terser";
import css from "rollup-plugin-css-only";
import copy from "rollup-plugin-copy";

const production = !process.env.ROLLUP_WATCH;

export default [
  // Content script bundle
  {
    input: "src/main.js",
    output: {
      sourcemap: !production,
      format: "iife",
      name: "app",
      file: "dist/content.js",
      inlineDynamicImports: true,  // ✅ Bundle all dynamic imports
    },
    plugins: [
      svelte({
        compilerOptions: {
          dev: !production,
        },
        emitCss: true,
      }),
      
      // Extract CSS to separate file
      css({ 
        output: "content.css" 
      }),
      
      resolve({
        browser: true,
        dedupe: ["svelte"],
        exportConditions: ["svelte"],
      }),
      
      commonjs(),
      
      production && terser(),
      
      // Copy static assets
      copy({
        targets: [
          { src: "manifest.json", dest: "dist" },
          { src: "icons/*", dest: "dist/icons" },
          // { src: "style.css", dest: "dist" },
        ],
      }),
    ],
    watch: {
      clearScreen: false,
    },
  },
];
</file>

<file path="src/components/FilesTab.svelte">
<script>
  import { createEventDispatcher } from "svelte";

  // Renamed from directoryFiles to recentFiles to reflect reality
  export let recentFiles = [];
  export let currentFile = "";

  const dispatch = createEventDispatcher();

  function selectFile(filepath) {
    dispatch("fileselect", filepath);
  }

  function clearHistory() {
    if (chrome && chrome.storage && chrome.storage.local) {
      chrome.storage.local.set({ recents: [] });
    }
  }

  function getFileName(path) {
    // If we have a stored name property use it, otherwise parse path
    return path.split("/").pop() || path;
  }
</script>

<div class="files-tab">
  <div class="info-box">
    <i class="fas fa-info-circle"></i>
    <p>
      Browser security prevents scanning local folders. Showing recently visited
      files instead.
    </p>
  </div>

  {#if recentFiles.length === 0}
    <div class="empty-state">
      <i class="fas fa-history"></i>
      <p>No recent files</p>
    </div>
  {:else}
    <div class="files-header">
      <span class="file-count">Recent</span>
      <button class="clear-btn" on:click={clearHistory}>Clear</button>
    </div>

    <ul class="files-list">
      {#each recentFiles as file}
        <li class="file-item">
          <button
            class="file-link"
            class:active={file.path === currentFile}
            on:click={() => selectFile(file.path)}
            title={file.path}
          >
            <i class="fas fa-file-alt file-icon"></i>
            <span class="file-name">{file.name}</span>
          </button>
        </li>
      {/each}
    </ul>
  {/if}
</div>

<style>
  .files-tab {
    padding: 16px;
  }

  .info-box {
    background: rgba(56, 139, 253, 0.1);
    border: 1px solid rgba(56, 139, 253, 0.4);
    border-radius: 6px;
    padding: 12px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 16px;
    display: flex;
    gap: 10px;
    align-items: flex-start;
  }

  .files-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-color);
  }

  .file-count {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
  }

  .clear-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 12px;
    cursor: pointer;
  }
  .clear-btn:hover {
    color: #f85149;
  }

  .files-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .file-link {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px;
    width: 100%;
    background: transparent;
    border: none;
    text-align: left;
    cursor: pointer;
    border-radius: 6px;
    color: var(--text-primary);
  }

  .file-link:hover {
    background: var(--bg-block);
  }
  .file-link.active {
    background: rgba(56, 139, 253, 0.15);
    color: var(--text-link);
  }

  .file-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 14px;
  }

  .empty-state {
    text-align: center;
    padding: 40px 0;
    color: var(--text-secondary);
    opacity: 0.7;
  }
</style>
</file>

<file path="src/components/MarkdownRenderer.svelte">
<script>
  import { onMount, createEventDispatcher } from "svelte";

  export let markdownContent = "";

  const dispatch = createEventDispatcher();
  let contentContainer;
  let isProcessing = true;
  let errorMessage = null;
  let renderedHtml = "";

  // Language mapping for icons
  const languageIcons = {
    js: "fab fa-js-square",
    javascript: "fab fa-js-square",
    ts: "fab fa-js-square",
    typescript: "fab fa-js-square",
    py: "fab fa-python",
    python: "fab fa-python",
    html: "fab fa-html5",
    css: "fab fa-css3-alt",
    java: "fab fa-java",
    go: "fab fa-golang",
    rust: "fas fa-gear",
    c: "fas fa-copyright",
    cpp: "fas fa-copyright",
    shell: "fas fa-terminal",
    bash: "fas fa-terminal",
    json: "fas fa-code",
    xml: "fas fa-code",
    yaml: "fas fa-file-code",
    md: "fab fa-markdown",
    markdown: "fab fa-markdown",
  };

  onMount(async () => {
    await processMarkdown();
  });

  async function processMarkdown() {
    try {
      if (!markdownContent) {
        errorMessage = "No markdown content found";
        isProcessing = false;
        return;
      }

      const modules = await loadModules();

      const processor = modules
        .unified()
        .use(modules.remarkParse)
        .use(modules.remarkGfm)
        .use(modules.remarkFrontmatter, ["yaml", "toml"])
        .use(modules.remarkGithubAdmonitionsToDirectives)
        .use(modules.remarkDirective)
        .use(modules.remarkToc, { heading: "toc|table[ -]of[ -]contents" })
        .use(modules.sectionize)
        .use(modules.remarkTextr, { plugins: [ellipses] })
        .use(modules.a11yEmoji)
        .use(modules.remarkIns)
        .use(modules.remarkSupersub)
        .use(modules.remarkRehype, { allowDangerousHtml: true })
        .use(modules.rehypeSlug)
        .use(modules.rehypeAutolinkHeadings, { behavior: "prepend" })
        .use(modules.rehypeHighlight, { ignoreMissing: true })
        .use(rehypeCodeLanguageIcons)
        .use(rehypeAdmonitions)
        .use(modules.rehypeStringify, { allowDangerousHtml: true });

      const file = await processor.process(markdownContent);
      renderedHtml = String(file);

      extractDocumentOutline();
      isProcessing = false;

      // Post-render DOM manipulations
      setTimeout(() => {
        addCodeCopyButtons();
      }, 100);
    } catch (error) {
      console.error("Error rendering markdown:", error);
      errorMessage = error.message;
      isProcessing = false;
    }
  }

  async function loadModules() {
    // Dynamic imports to keep bundle chunks optimal
    const [
      unified,
      remarkParse,
      remarkGfm,
      remarkRehype,
      rehypeHighlight,
      rehypeStringify,
      a11yEmoji,
      remarkFrontmatter,
      remarkDirective,
      remarkTextr,
      remarkToc,
      remarkSectionize,
      remarkIns,
      remarkSupersub,
      rehypeSlug,
      rehypeAutolinkHeadings,
      remarkGithubAdmonitionsToDirectives,
    ] = await Promise.all([
      import("unified"),
      import("remark-parse"),
      import("remark-gfm"),
      import("remark-rehype"),
      import("rehype-highlight"),
      import("rehype-stringify"),
      import("@fec/remark-a11y-emoji"),
      import("remark-frontmatter"),
      import("remark-directive"),
      import("remark-textr"),
      import("remark-toc"),
      import("remark-sectionize"),
      import("remark-ins"),
      import("remark-supersub"),
      import("rehype-slug"),
      import("rehype-autolink-headings"),
      import("remark-github-admonitions-to-directives"),
    ]);

    return {
      unified: unified.unified,
      remarkParse: remarkParse.default,
      remarkGfm: remarkGfm.default,
      remarkRehype: remarkRehype.default,
      rehypeHighlight: rehypeHighlight.default,
      rehypeStringify: rehypeStringify.default,
      a11yEmoji: a11yEmoji.default,
      remarkFrontmatter: remarkFrontmatter.default,
      remarkDirective: remarkDirective.default,
      remarkTextr: remarkTextr.default,
      remarkToc: remarkToc.default,
      sectionize: remarkSectionize.default,
      remarkIns: remarkIns.default,
      remarkSupersub: remarkSupersub.default,
      rehypeSlug: rehypeSlug.default,
      rehypeAutolinkHeadings: rehypeAutolinkHeadings.default,
      remarkGithubAdmonitionsToDirectives:
        remarkGithubAdmonitionsToDirectives.default,
    };
  }

  // --- AST Utilities ---
  function visit(node, callback) {
    callback(node);
    if (node.children) node.children.forEach((c) => visit(c, callback));
  }

  function ellipses(input) {
    return input.replace(/\.{3}/gim, "…");
  }

  function rehypeCodeLanguageIcons() {
    return (tree) => {
      visit(tree, (node) => {
        if (node.type === "element" && node.tagName === "pre") {
          const codeElement = node.children.find((c) => c.tagName === "code");
          if (codeElement?.properties?.className) {
            const langClass = codeElement.properties.className.find((c) =>
              c.startsWith("language-"),
            );
            if (langClass) {
              const lang = langClass.replace("language-", "").toLowerCase();
              const iconClass = languageIcons[lang] || "fas fa-code";

              node.properties.className = [
                ...(node.properties.className || []),
                "has-language",
              ];

              node.children.unshift({
                type: "element",
                tagName: "div",
                properties: { className: ["language-icon"] },
                children: [
                  {
                    type: "element",
                    tagName: "i",
                    properties: { className: iconClass.split(" ") },
                    children: [],
                  },
                  { type: "text", value: " " + lang },
                ],
              });
            }
          }
        }
      });
    };
  }

  function rehypeAdmonitions() {
    return (tree) => {
      visit(tree, (node) => {
        if (
          node.type === "element" &&
          node.tagName === "div" &&
          node.properties.dataDirectiveName
        ) {
          const name = node.properties.dataDirectiveName.toLowerCase();
          const valid = ["note", "tip", "important", "warning", "caution"];
          if (valid.includes(name)) {
            node.properties.className = [
              ...(node.properties.className || []),
              "admonition",
              `admonition-${name}`,
            ];
            // Simple title construction
            const title = {
              type: "element",
              tagName: "div",
              properties: { className: ["admonition-title"] },
              children: [{ type: "text", value: name.toUpperCase() }],
            };
            node.children = [
              title,
              {
                type: "element",
                tagName: "div",
                properties: { className: ["admonition-content"] },
                children: node.children,
              },
            ];
          }
        }
      });
    };
  }

  function extractDocumentOutline() {
    setTimeout(() => {
      const headings = document.querySelectorAll(
        "#markdown-content-container h1, h2, h3",
      );
      const outline = Array.from(headings).map((h) => ({
        id: h.id,
        text: h.textContent.replace(/^#+\s/, "").trim(),
        level: parseInt(h.tagName.substring(1)),
      }));
      dispatch("outlinegenerated", outline);
    }, 200);
  }

  function addCodeCopyButtons() {
    const codeBlocks = document.querySelectorAll(
      "#markdown-content-container pre",
    );
    codeBlocks.forEach((block) => {
      if (!block.querySelector("code")) return;

      const btn = document.createElement("button");
      btn.className = "copy-code-button";
      btn.innerHTML = '<i class="far fa-copy"></i>';

      btn.addEventListener("click", () => {
        const text = block.querySelector("code").innerText;
        navigator.clipboard.writeText(text);
        btn.innerHTML = '<i class="fas fa-check"></i>';
        btn.classList.add("copied");
        setTimeout(() => {
          btn.innerHTML = '<i class="far fa-copy"></i>';
          btn.classList.remove("copied");
        }, 2000);
      });

      block.appendChild(btn);
    });
  }
</script>

{#if isProcessing}
  <div class="center-msg">
    <i class="fas fa-spinner fa-spin"></i>
    <p>Rendering...</p>
  </div>
{:else if errorMessage}
  <div class="center-msg error">
    <i class="fas fa-exclamation-triangle"></i>
    <p>{errorMessage}</p>
  </div>
{:else}
  <div id="markdown-content-container" bind:this={contentContainer}>
    {@html renderedHtml}
  </div>
{/if}

<style>
  .center-msg {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 80vh;
    color: var(--text-secondary);
  }
  .center-msg i {
    font-size: 2rem;
    margin-bottom: 1rem;
  }
  .error {
    color: #f85149;
  }
</style>
</file>

<file path="src/components/Sidebar.svelte">
<script>
  import { createEventDispatcher } from "svelte";
  import OutlineTab from "./OutlineTab.svelte";
  import FilesTab from "./FilesTab.svelte";

  export let sidebarOpen = true;
  export let currentFile = "";
  export let documentOutline = [];
  export let recentFiles = []; // Prop renamed to match App.svelte

  let activeTab = "outline";
  const dispatch = createEventDispatcher();

  function switchTab(tab) {
    activeTab = tab;
  }

  function handleFileSelect(event) {
    dispatch("filechange", event.detail);
  }
</script>

<aside class="sidebar baseGlass" class:open={sidebarOpen}>

  <div class="tabs">
    <button
      class="tab-button"
      class:active={activeTab === "outline"}
      on:click={() => switchTab("outline")}
      title="Outline"
    >
      <i class="fas fa-list-ul"></i>
    </button>
    <button
      class="tab-button"
      class:active={activeTab === "files"}
      on:click={() => switchTab("files")}
      title="Recent Files"
    >
      <i class="fas fa-history"></i>
    </button>
  </div>

  <div class="tab-content">
    {#if activeTab === "outline"}
      <OutlineTab {documentOutline} />
    {:else}
      <FilesTab {recentFiles} {currentFile} on:fileselect={handleFileSelect} />
    {/if}
  </div>
</aside>

<style>
  ::-webkit-scrollbar {
    display: none !important;
  }

  .sidebar {
    position: fixed;
    top: 0;
    left: -300px;
    width: 300px;
    height: 100vh;
    background: none;
    border-right: 1px solid var(--border-color);
    transition: left 260ms var(--ioease);
    z-index: 1000;
    display: flex;
    flex-direction: column;
  }

  .sidebar.open {
    left: 0;
  }

  .sidebar-header {
    padding: 16px;
    border-bottom: 1px solid var(--border-color);
  }

  .sidebar-header h2 {
    margin: 0;
    font-size: 18px;
    color: var(--text-primary);
  }

  .tabs {
    display: flex;
    border-bottom: 1px solid var(--border-color);
  }

  .tab-button {
    flex: 1;
    padding: 12px;
    background: transparent;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    transition: all 200ms var(--ioease);
    border-bottom: 2px solid transparent;
  }

  .tab-button:hover {
    color: var(--text-primary);
  }

  .tab-button.active {
    color: var(--text-link);
    border-bottom-color: var(--text-link);
  }

  .tab-content {
    flex: 1;
    overflow-y: auto;
  }
</style>
</file>

<file path="src/App.svelte">
<script>
  import { onMount } from "svelte";
  import Sidebar from "./components/Sidebar.svelte";
  import MarkdownRenderer from "./components/MarkdownRenderer.svelte";

  export let initialMarkdownContent = "";

  let sidebarOpen = true;
  let currentFile = "";
  let documentOutline = [];
  let recentFiles = [];

  // Use the passed content for initial render
  let markdownContent = initialMarkdownContent;

  onMount(() => {
    currentFile = window.location.href;
    loadRecentFiles();

    // Listen for storage changes to update list in realtime
    if (chrome && chrome.storage) {
      chrome.storage.onChanged.addListener((changes, area) => {
        if (area === "local" && changes.recents) {
          recentFiles = changes.recents.newValue;
        }
      });
    }
  });

  function loadRecentFiles() {
    if (chrome && chrome.storage && chrome.storage.local) {
      chrome.storage.local.get({ recents: [] }, (result) => {
        recentFiles = result.recents;
      });
    }
  }

  function toggleSidebar() {
    sidebarOpen = !sidebarOpen;
  }

  function handleOutlineGenerated(event) {
    documentOutline = event.detail;
  }

  function handleFileChange(event) {
    const newFile = event.detail;
    // For local files, we just change the window location
    window.location.href = newFile;
  }
</script>

<svelte:head>
  <meta charset="UTF-8" />
  <!-- style.css is bundled into content.css by Rollup -->
</svelte:head>

<div class="app-container baseGradient" class:sidebar-open={sidebarOpen}>
  <button
    class="sidebar-toggle"
    on:click={toggleSidebar}
    aria-label="Toggle sidebar"
  >
    <i class="fas {sidebarOpen ? 'fa-chevron-left' : 'fa-chevron-right'}"></i>
  </button>

  <Sidebar
    {sidebarOpen}
    {currentFile}
    {documentOutline}
    {recentFiles}
    on:filechange={handleFileChange}
  />

  <main class="content-wrapper">
    <MarkdownRenderer
      {markdownContent}
      on:outlinegenerated={handleOutlineGenerated}
    />
  </main>
</div>

<style>
  .app-container {
    display: flex;
    min-height: 100vh;
    position: relative;
    background: var(--bg-body);
  }

  .sidebar-toggle {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 1001;
    background: var(--bg-sidebar);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    border-radius: 8px;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 200ms var(--madSmooth);
  }

  .sidebar-toggle:hover {
    color: var(--text-primary);
    background: var(--bg-block);
  }

  .sidebar-open .sidebar-toggle {
    left: 320px;
  }

  .content-wrapper {
    flex: 1;
    transition: margin-left 300ms ease-in-out;
    margin-left: 0;
    width: 100%;
  }

  .sidebar-open .content-wrapper {
    margin-left: 300px;
  }
</style>
</file>

<file path="src/main.js">
import App from './App.svelte'
import './style.css'
import './fontawe.css'

// Wait for DOM to be ready
function init () {
  console.log('Sven Extension: Initializing...')

  // Check if this is a markdown file based on extension
  const path = window.location.pathname.toLowerCase()
  const isMarkdownFile =
    path.endsWith('.md') ||
    path.endsWith('.markdown') ||
    path.endsWith('.mdown')

  if (!isMarkdownFile) {
    console.log('Sven Extension: Not a markdown file, skipping.')
    return
  }

  // Prevent double-initialization
  if (document.getElementById('sven-app-root')) return

  // Extract the markdown content BEFORE clearing the body
  let initialContent = ''
  const preElement = document.querySelector('pre')
  if (preElement) {
    initialContent = preElement.textContent
  } else {
    // Fallback: chrome sometimes renders text without a pre tag
    initialContent = document.body.innerText
  }

  if (!initialContent.trim()) {
    console.warn('Sven Extension: No content found to render.')
  }

  // Update Recent Files in Chrome Storage
  updateRecentFiles()

  // Clear the body and mount Svelte app
  document.body.innerHTML = '<div id="sven-app-root"></div>'
  const app = new App({
    target: document.getElementById('sven-app-root'),
    props: {
      initialMarkdownContent: initialContent
    }
  })

  return app
}

function updateRecentFiles () {
  try {
    const currentFile = {
      path: window.location.href,
      name: decodeURIComponent(window.location.pathname.split('/').pop()),
      lastVisited: Date.now()
    }

    // Use local storage to persist recent files
    if (chrome && chrome.storage && chrome.storage.local) {
      chrome.storage.local.get({ recents: [] }, result => {
        let recents = result.recents

        // Remove if exists (to move to top)
        recents = recents.filter(f => f.path !== currentFile.path)

        // Add to top
        recents.unshift(currentFile)

        // Keep max 20
        recents = recents.slice(0, 20)

        chrome.storage.local.set({ recents: recents })
      })
    }
  } catch (e) {
    console.error('Sven: Failed to update recent files', e)
  }
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', init)
} else {
  init()
}
</file>

<file path="src/style.css">
:root {
  --bg-body: #0d1117;
  --bg-sidebar: #010409;
  --bg-block: #161b22;
  --bg-code: #161b22;
  --text-primary: #c9d1d9;
  --text-secondary: #8b949e;
  --text-link: #58a6ff;
  --text-link-hover: #79c0ff;
  --border-color: #30363d10;
  --border-light: rgba(240, 246, 252, 0);
  --hl-keyword: #ff7b72;
  --hl-function: #d2a8ff;
  --hl-string: #a5d6ff;
  --hl-variable: #79c0ff;
  --hl-tag: #7ee787;
  --hl-comment: #8b949e;
  --hl-constant: #79c0ff;
  --hl-number: #79c0ff;
  --hl-attr: #79c0ff;
  /* Typography */
  --fontSans: Inter, "Symbols Nerd Font", sans-serif !important;
  --fontAlt: Finder, "Symbols Nerd Font", sans-serif !important;
  --fontPlay: Neco, "Symbols Nerd Font" !important;
  --fontMono: "SFMono Nerd Font", monospace !important;
  /* Font Sizes */
  --sizeh1: 1.7rem;
  --sizeh2: 1.6rem;
  --sizeh3: 1.5rem;
  --sizeh4: 1.4rem;
  --sizebase: 1.3rem;
  --sizeh5: 1.2rem;
  --sizeh6: 1.1rem;
  /* Background & Images */
  --bgWidget: #11121599;
  --color-background: #141518;
  /* Colors */
  --color-primary: hsl(39.38deg 22.33% 65.53% / 89%);
  --color-positive: var(--color-primary);
  --color-negative: hsl(0deg 38.01% 63.16%);
  --link-hover: #cdb47f;
  /* Border Radius */
  --bdrRound: 15px;
  --bdrCurve: 9px;
  /* Effects */
  --nuShadow: 0 0 0 1px rgba(255, 255, 255, 0.03), 0 12px 28px rgba(0, 0, 0, 0.6);
  --ioease: cubic-bezier(0.165, 0.85, 0.45, 1);
  /* Base Glass */
  --glassBg: linear-gradient(135deg, rgba(10, 10, 10, 0.75), rgba(22, 22, 22, 0.85));
  --glassBf: blur(10px) saturate(1.1);
}

/* ============================================================================
   BASE & GLOBAL STYLES
   ============================================================================ */

.baseGradient {
  background: linear-gradient(135deg, #0a0a0a 0%, #101010 45%, #161616 100%);
}
.baseDepth {
  border-radius: var(--bdrRound);
  box-shadow: var(--nuShadow);
}
.baseGlass {
  background: linear-gradient(135deg, rgba(10, 10, 10, 0.75), rgba(22, 22, 22, 0.85));
  backdrop-filter: blur(10px) saturate(1.1);
  -webkit-backdrop-filter: blur(10px) saturate(1.1);
}

::-webkit-scrollbar {
  display: none !important;
}

/* Global Reset & Typography */
html {
  box-sizing: border-box;
  text-rendering: optimizeLegibility;
  letter-spacing: 0.05px;
  scroll-behavior: smooth;
}

body {
  margin: 0;
  padding: 0;
  font-family: var(--fontSans);
  font-size: 16px;
  line-height: 1.6;
  color: var(--text-primary);
  background: none;
}

/* --- Markdown Content Area --- */
#markdown-content-container {
  max-width: 980px;
  margin: 0 auto;
  padding: 48px 32px;
}

/* Headings */
#markdown-content-container h1,
h2,
h3,
h4,
h5,
h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
  color: #e6edf3;
}

#markdown-content-container h1 {
  font-size: 2em;
  border-bottom: 1px solid var(--border-color);
  padding-bottom: 0.3em;
}

#markdown-content-container h2 {
  font-size: 1.5em;
  border-bottom: 1px solid var(--border-color);
  padding-bottom: 0.3em;
}

/* Links */
#markdown-content-container a {
  color: var(--text-link);
  text-decoration: none;
}

#markdown-content-container a:hover {
  text-decoration: none;
  color: var(--text-link-hover);
}

/* Paragraphs & Lists */
#markdown-content-container p {
  margin-bottom: 16px;
}

#markdown-content-container ul,
#markdown-content-container ol {
  padding-left: 2em;
  margin-bottom: 16px;
}

#markdown-content-container li+li {
  margin-top: 0.25em;
}

/* Blockquotes */
#markdown-content-container blockquote {
  margin: 0 0 16px;
  padding: 0 1em;
  color: var(--text-secondary);
  border-left: 0.25em solid var(--border-color);
  font-style: italic;
}

/* Images */
#markdown-content-container img {
  max-width: 100%;
  box-sizing: content-box;
  background-color: #ffffff30;
  /* Ensure transparent PNGs are visible */
  border-radius: 6px;
}

/* --- Code & Syntax Highlighting --- */

/* Inline Code */
#markdown-content-container code {
  padding: 0.2em 0.4em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(44, 44, 44, 0.4);
  border-radius: 6px;
  font-family: var(--fontMono);
}

/* Code Blocks */
#markdown-content-container pre {
  padding: 20px;
  overflow: auto;
  font-size: 87%;
  line-height: 1.45;
  background-color: var(--bg-block);
  border-radius: 9px;
  margin-bottom: 16px;
  border: 1px solid var(--border-color);
  position: relative;
  /* Context for copy button */
}

#markdown-content-container pre code {
  display: inline;
  padding: 0;
  margin: 0;
  overflow: visible;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

/* Highlight.js Syntax Theme (Custom Mapping) */
.hljs-comment,
.hljs-quote {
  color: var(--hl-comment);
  font-style: italic;
}

.hljs-doctag,
.hljs-keyword,
.hljs-formula {
  color: var(--hl-keyword);
}

.hljs-section,
.hljs-name,
.hljs-selector-tag,
.hljs-deletion,
.hljs-subst {
  color: var(--hl-keyword);
}

.hljs-literal {
  color: var(--hl-constant);
}

.hljs-string,
.hljs-regexp,
.hljs-addition,
.hljs-attribute,
.hljs-meta .hljs-string {
  color: var(--hl-string);
}

.hljs-attr,
.hljs-variable,
.hljs-template-variable,
.hljs-type,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-number {
  color: var(--hl-variable);
}

.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-meta,
.hljs-selector-id,
.hljs-title {
  color: var(--hl-function);
}

.hljs-built_in,
.hljs-title.class_,
.hljs-class .hljs-title {
  color: var(--hl-constant);
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

/* Language Icons */
pre.has-language {
  padding-top: 32px !important;
}

.language-icon {
  position: absolute;
  top: 8px;
  left: 12px;
  font-size: 12px !important;
  color: var(--text-secondary);
  font-family: var(--fontSans);
  font-weight: 600;
  text-transform: uppercase;
  -webkit-user-select: none;
  user-select: none;
}

/* Copy Button */
.copy-code-button {
  position: absolute;
  top: 6px;
  right: 6px;
  background-color: rgba(255, 255, 255, 0);
  border: 1px solid rgba(255, 255, 255, 0);
  border-radius: 9px;
  color: var(--text-primary);
  padding: 4px 8px;
  cursor: pointer;
  transition: all 130ms var(--ioease);
  opacity: 0;
}

pre:hover .copy-code-button {
  opacity: 1;
}

.copy-code-button:hover {
  background-color: rgba(255, 255, 255, 0.15);
}

.copy-code-button.copied {
  border-color: var(--hl-tag);
  color: var(--hl-tag);
}

/* --- Admonitions --- */
.admonition {
  padding: 16px;
  margin-bottom: 16px;
  border-left: 4px solid;
  border-radius: 6px;
  background-color: var(--bg-block);
}

.admonition-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 700;
  margin-bottom: 8px;
}

.admonition-content {
  margin-left: 0;
}

/* TABLES */

/* Scoped to your container */
#markdown-content-container table {
  /* Layout & Flow */
  width: 95%;                /* Slightly less than 100% to provide the 'indent' look */
  margin: 1.5rem auto;       /* Vertical spacing + 'auto' centers the table */
  
  /* Visuals */
  border-collapse: collapse; /* Essential for clean borders */
  background-color: #1a1a1a00;
  color: #d0d0d0;
  font-size: 0.95rem;        /* Slight reduction looks neater */
  border-radius: 6px;
}

/* Header Styling */
#markdown-content-container table th {
  background-color: #2a2a2a;
  color: #ffffff;
  font-weight: 600;
  text-align: left;
  padding: 12px 16px;
  
  /* Borders: Bottom and Right only */
  border-bottom: 1px solid #404040; /* Slightly thicker for header separation */
  border-right: 1px solid #333333;
  border-radius: 6px;
}

/* Body Cell Styling */
#markdown-content-container table td {
  padding: 12px 16px;
  color: #d0d0d0;
  
  /* Borders: Bottom and Right only */
  border-bottom: 1px solid #333333;
  border-right: 1px solid #333333;
}

/* Alternating Row Colors (Zebra Striping) */
#markdown-content-container table tbody tr:nth-child(even) {
  background-color: #222222;
}

/* Hover Effect (Optional, nice for UX) */
#markdown-content-container table tbody tr:hover {
  background-color: #2d2d2d;
}

/* --- THE CLEANUP CREW --- */
/* Remove borders from the far right column */
#markdown-content-container table th:last-child,
#markdown-content-container table td:last-child {
  border-right: none;
}

/* Remove borders from the very bottom row */
#markdown-content-container table tbody tr:last-child td {
  border-bottom: none;
}

#markdown-content-container table th, #markdown-content-container table td {
  padding: 6px 13px;
  border-width: 1px;
  border-style: solid;
  border-color: rgb(208, 215, 222, 0.1) !important;
  background-color: rgb(24, 24, 24) !important;
  border-image: initial;
}
</file>

</files>
